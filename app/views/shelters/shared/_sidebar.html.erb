<% tabs = {
  'home'      => 'Home',
  'animals'   => 'Roster',
  'network'   => 'Shelter Network',
  'transfers' => 'Transfers',
  'messages'  => 'Messages',
  'settings'  => 'Settings'
} %>

<nav class="bg-slate-100 rounded-2xl p-3 space-y-1 text-sm">
  <% tabs.each do |key, label| %>
    <% path =
      if key == 'animals'
        # Roster goes to AnimalsController#index
        shelter_animals_path(@shelter)
      else
        # All other tabs still use the tab param on SheltersController#show
        shelter_path(@shelter, tab: key)
      end
    %>

    <% active =
      if key == 'animals'
        controller_name == 'animals' && action_name == 'index'
      else
        key == @tab
      end
    %>

    <%= link_to path,
                class: [
                  "block rounded-xl px-3 py-2 transition",
                  (active ? "bg-white shadow-sm text-slate-900 font-medium" :
                            "text-slate-600 hover:bg-slate-200")
                ].join(" ") do %>

      <div class="flex items-center gap-2">
        <span><%= label %></span>

        <% if key == 'transfers' && @open_transfer_count.to_i > 0 %>
          <span class="ml-auto pill-base chip-info text-[0.65rem] px-2 min-w-[1.25rem] justify-center">
            <%= @open_transfer_count %>
          </span>
        <% elsif key == 'messages' && @unread_conversation_count.to_i > 0 %>
          <span class="ml-auto pill-base chip-danger text-[0.65rem] px-2 min-w-[1.25rem] justify-center">
            <%= @unread_conversation_count %>
          </span>
        <% end %>
      </div>

    <% end %>
  <% end %>
</nav>
